<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      body {
        margin: 0;
        overflow: hidden;
      }

      canvas {
        display: block;
      }
    </style>
    <title>Interactive Plasma Bolt</title>
  </head>
  <body>
    <canvas id="plasmaCanvas"></canvas>
    <script>
      const canvas = document.getElementById('plasmaCanvas');
      const ctx = canvas.getContext('2d');

      let bolts = [];

      class Bolt {
        constructor(x, y) {
          this.x = x;
          this.y = y;
          this.points = [{ x, y }];
          this.speed = 10;
          this.angle = Math.random() * Math.PI * 2; // 랜덤한 각도로 시작
        }

        update() {
          const newX = this.x + Math.cos(this.angle) * this.speed;
          const newY = this.y + Math.sin(this.angle) * this.speed;

          this.x = newX;
          this.y = newY;

          this.points.push({ x: newX, y: newY });

          if (this.points.length > 20) {
            this.points.shift();
          }

          // 각도를 약간씩 변경하여 볼트가 곡선으로 움직이도록 함
          this.angle += (Math.random() - 0.5) * 0.4;
        }

        draw() {
          const gradient = ctx.createLinearGradient(
            this.points[0].x,
            this.points[0].y,
            this.points[this.points.length - 1].x,
            this.points[this.points.length - 1].y
          );
          gradient.addColorStop(0, 'red');
          gradient.addColorStop(1, 'blue');

          ctx.beginPath();
          ctx.moveTo(this.points[0].x, this.points[0].y);

          for (let i = 1; i < this.points.length; i++) {
            ctx.lineTo(this.points[i].x, this.points[i].y);
          }

          ctx.strokeStyle = gradient;
          ctx.lineWidth = 2;
          ctx.stroke();
        }
      }

      function createBolt(x, y) {
        bolts.push(new Bolt(x, y));
      }

      function update() {
        bolts.forEach((bolt) => {
          bolt.update();
        });
      }

      function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        bolts.forEach((bolt) => {
          bolt.draw();
        });

        requestAnimationFrame(draw);
      }

      canvas.addEventListener('mousemove', (e) => {
        createBolt(e.clientX, e.clientY);
      });

      function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }

      window.addEventListener('resize', resizeCanvas);

      resizeCanvas();
      draw();

      setInterval(update, 100);
    </script>
  </body>
</html>
